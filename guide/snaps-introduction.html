<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Snaps Tutorial | MetaMask Docs</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/metamask-fox.svg">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/icons/apple-touch-icon-152x152.png">
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#3eaf7c">
    <meta name="description" content="Developer documentation for the MetaMask Ethereum wallet">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    <link rel="preload" href="/assets/css/0.styles.d79a1fb0.css" as="style"><link rel="preload" href="/assets/js/app.464eacd2.js" as="script"><link rel="preload" href="/assets/js/4.baa1ba71.js" as="script"><link rel="preload" href="/assets/js/35.eeafc70a.js" as="script"><link rel="preload" href="/assets/js/8.2bb62a19.js" as="script"><link rel="prefetch" href="/assets/js/10.9885c248.js"><link rel="prefetch" href="/assets/js/11.2de1d8f2.js"><link rel="prefetch" href="/assets/js/12.8c4c0727.js"><link rel="prefetch" href="/assets/js/13.7348b7e7.js"><link rel="prefetch" href="/assets/js/14.3ca3efca.js"><link rel="prefetch" href="/assets/js/15.53c9cf0e.js"><link rel="prefetch" href="/assets/js/16.878c533b.js"><link rel="prefetch" href="/assets/js/17.84fe591e.js"><link rel="prefetch" href="/assets/js/18.729eeed4.js"><link rel="prefetch" href="/assets/js/19.101c259c.js"><link rel="prefetch" href="/assets/js/20.4b085eef.js"><link rel="prefetch" href="/assets/js/21.7cd19eea.js"><link rel="prefetch" href="/assets/js/22.be411b40.js"><link rel="prefetch" href="/assets/js/23.f88fcd4f.js"><link rel="prefetch" href="/assets/js/24.31ebaf14.js"><link rel="prefetch" href="/assets/js/25.229e3b42.js"><link rel="prefetch" href="/assets/js/26.f3ced236.js"><link rel="prefetch" href="/assets/js/27.978bfcab.js"><link rel="prefetch" href="/assets/js/28.cd212862.js"><link rel="prefetch" href="/assets/js/29.a7dda938.js"><link rel="prefetch" href="/assets/js/30.169692e3.js"><link rel="prefetch" href="/assets/js/31.80e09e40.js"><link rel="prefetch" href="/assets/js/32.6620dda9.js"><link rel="prefetch" href="/assets/js/33.554a79ad.js"><link rel="prefetch" href="/assets/js/34.19ed6bdb.js"><link rel="prefetch" href="/assets/js/36.307a03f6.js"><link rel="prefetch" href="/assets/js/37.eb19e0d7.js"><link rel="prefetch" href="/assets/js/5.d309383e.js"><link rel="prefetch" href="/assets/js/6.a0d1e866.js"><link rel="prefetch" href="/assets/js/7.50a770b2.js"><link rel="prefetch" href="/assets/js/9.c87edbeb.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.3591cf1d.js"><link rel="prefetch" href="/assets/js/vendors~notification.8ec48a6d.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d79a1fb0.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/metamask-fox.svg" alt="MetaMask Docs" class="logo"> <span class="site-name can-hide">MetaMask Docs</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/guide/" class="nav-link router-link-active">
  Guide
</a></div> <a href="https://github.com/MetaMask/metamask-docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/guide/" class="nav-link router-link-active">
  Guide
</a></div> <a href="https://github.com/MetaMask/metamask-docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Guide</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/" aria-current="page" class="sidebar-link">Introduction</a></li><li><a href="/guide/getting-started.html" class="sidebar-link">Getting Started</a></li><li><a href="/guide/common-terms.html" class="sidebar-link">Common Terms</a></li><li><a href="/guide/initializing-dapps.html" class="sidebar-link">Initializing Dapps</a></li><li><a href="/guide/accessing-accounts.html" class="sidebar-link">Accessing Accounts</a></li><li><a href="/guide/sending-transactions.html" class="sidebar-link">Sending Transactions</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>API Reference</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/ethereum-provider.html" class="sidebar-link">Ethereum Provider API</a></li><li><a href="/guide/provider-migration.html" class="sidebar-link">Provider Migration Guide</a></li><li><a href="/guide/rpc-api.html" class="sidebar-link">RPC API</a></li><li><a href="/guide/signing-data.html" class="sidebar-link">Signing Data</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Best Practices</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/registering-function-names.html" class="sidebar-link">Registering Your Contract's Method Names</a></li><li><a href="/guide/registering-your-token.html" class="sidebar-link">Registering Tokens with Users</a></li><li><a href="/guide/defining-your-icon.html" class="sidebar-link">Defining Your App's Icon</a></li><li><a href="/guide/onboarding-library.html" class="sidebar-link">Onboarding Library</a></li><li><a href="/guide/metamask-extension-provider.html" class="sidebar-link">MetaMask Extension Provider</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Mobile</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/mobile-getting-started.html" class="sidebar-link">Introduction</a></li><li><a href="/guide/site-compatibility-checklist.html" class="sidebar-link">Site Compatibility Checklist</a></li><li><a href="/guide/mobile-best-practices.html" class="sidebar-link">Best Practices</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Snaps</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/snaps-introduction.html" aria-current="page" class="active sidebar-link">Snaps Tutorial</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/snaps-introduction.html#what-is-snaps" class="sidebar-link">What is Snaps?</a></li><li class="sidebar-sub-header"><a href="/guide/snaps-introduction.html#metamask-snaps-overview" class="sidebar-link">MetaMask Snaps: Overview</a></li><li class="sidebar-sub-header"><a href="/guide/snaps-introduction.html#sample-snap-tutorial" class="sidebar-link">Sample snap tutorial</a></li><li class="sidebar-sub-header"><a href="/guide/snaps-introduction.html#where-to-go-from-here" class="sidebar-link">Where to go from here</a></li></ul></li><li><a href="/guide/snaps-rpc-api.html" class="sidebar-link">Snaps JSON-RPC API</a></li><li><a href="/guide/snaps-development-guide.html" class="sidebar-link">Snaps Development Guide</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Resources</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/create-dapp.html" class="sidebar-link">Create A Simple Dapp</a></li><li><a href="/guide/contributors.html" class="sidebar-link">Contributors</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="snaps-tutorial"><a href="#snaps-tutorial" class="header-anchor">#</a> Snaps Tutorial</h1> <h2 id="what-is-snaps"><a href="#what-is-snaps" class="header-anchor">#</a> What is Snaps?</h2> <p>Snaps are a new evolution of MetaMask's functionality. By using MetaMask Flask in conjunction with the Snaps API, developers are able to bring their own code to the wallet in a custom-made code laboratory. MetaMask is the first wallet to provide this openness and flexibility to developers, paving the way to scale the number of features and personalization available to the wallet and your Dapp.</p> <p>Snaps allows developers to build and plug in their own APIs to MetaMask. No longer do you have to rely on MetaMask to roll out features and updates. The rate of innovation, and MetaMask's flexibility, are limited only by your imagination and your capacity to build.</p> <h2 id="metamask-snaps-overview"><a href="#metamask-snaps-overview" class="header-anchor">#</a> MetaMask Snaps: Overview</h2> <p>Broadly speaking, MetaMask Snaps consists of two things: (1) a way to run untrusted JavaScript inside the MetaMask application, and (2) APIs for websites and MetaMask to communicate with individual snaps. As with MetaMask’s <a href="https://docs.metamask.io/guide/ethereum-provider.html" target="_blank" rel="noopener noreferrer">Ethereum JavaScript provider API<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, communication occurs via JSON-RPC requests and responses.</p> <h3 id="current-functionality"><a href="#current-functionality" class="header-anchor">#</a> Current functionality</h3> <p>At present, snaps can make JSON-RPC requests of MetaMask, and websites can make JSON-RPC requests of MetaMask and snaps running inside MetaMask. In this way, snaps can expand MetaMask’s RPC API and change the behavior of the MetaMask application at runtime. Over time, MetaMask will use this to support different blockchains and other decentralized protocols, novel kinds of cryptography, novel kinds of crypto assets, and a countless number of other features.</p> <p>For the prototype Snaps system, snaps cannot modify the MetaMask UI, but can extend the MetaMask RPC API, and exchange arbitrary messages with websites visited by the user. Therefore, the user interface for any snap must exist entirely in the website during the prototype stage.</p> <h3 id="execution-environment"><a href="#execution-environment" class="header-anchor">#</a> Execution Environment</h3> <p>As stated, snaps are untrusted JavaScript programs, but execute safely inside the MetaMask application. To isolate snaps from the rest of the application, and to provide a “fully virtualizable” execution environment, MetaMask uses <a href="https://github.com/endojs/endo/tree/master/packages/ses" target="_blank" rel="noopener noreferrer">Secure EcmaScript (SES)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, a subset of JavaScript developed by <a href="https://agoric.com/" target="_blank" rel="noopener noreferrer">Agoric<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. Among other things, SES allows us to restrict access to global JavaScript APIs and to isolate untrusted code from other parts of the application. SES does this at the cost of some performance, and incompatibility with some JavaScript practices, such as modifying prototypes of intrinsic objects, e.g. the Promise constructor.</p> <h2 id="sample-snap-tutorial"><a href="#sample-snap-tutorial" class="header-anchor">#</a> Sample snap tutorial</h2> <p>There are a number of simple snaps available for you to learn from and begin to get an idea of what your own snap needs. The following tutorial will walk you through a Hello World snap.</p> <h3 id="prerequisites"><a href="#prerequisites" class="header-anchor">#</a> Prerequisites</h3> <ul><li>nodejs <code>^14.15</code></li> <li>nvm (recommended)</li> <li>git</li> <li>yarn v1</li> <li>macOS, Linux, or Windows Subsystem Linux</li></ul> <h3 id="getting-flask-running-in-your-local-environment"><a href="#getting-flask-running-in-your-local-environment" class="header-anchor">#</a> Getting Flask running in your local environment</h3> <p>Flask, as described [here](LINK TO FLASK PAGE REQUIRED HERE), is a distribution channel for developmental, experimental, kooky stuff for MetaMask, and Snaps is the first feature to be released through it.</p> <ul><li>Start by downloading [Flask](LINK HERE) and adding it to Chrome</li></ul> <p>At this point, you should see Flask added to your browser as an extension. If you currently have another build of MetaMask installed in your browser, disable it (but make sure you have your Secret Recovery Phrase backed up!).</p> <h3 id="serving-a-snap-to-your-local-environment"><a href="#serving-a-snap-to-your-local-environment" class="header-anchor">#</a> Serving a snap to your local environment</h3> <p>Now that you have Flask in your browser, it's time to find something to plug into it. If you don't want to download any code for the moment, check out the example snap <a href="https://metamask.github.io/snap-template/" target="_blank" rel="noopener noreferrer">deployed here<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and follow the instructions below under 'Interacting with the Snap'.</p> <p>If you're ready to jump in and see how a Snap looks on the backend, follow the steps below!</p> <p>Open up a new terminal window, and do the following:</p> <ul><li>clone the snaps monorepo <a href="https://github.com/MetaMask/snaps-skunkworks" target="_blank" rel="noopener noreferrer">here<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><code>cd</code> into the repo, and run <code>nvm use 14.15</code> to make sure you're using the right version of nodejs</li> <li>navigate to the &quot;Hello, World!&quot; snap: <code>cd packages/example-snap</code></li> <li>install <a href="https://npmjs.com/package/@metamask/snaps-cli" target="_blank" rel="noopener noreferrer">@metamask/snaps-cli<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> package locally: <code>yarn add snaps-cli</code></li> <li>run <code>yarn mm-snap serve</code></li></ul> <p>Your terminal window should now be serving the example Snap locally. Time to see the functionality in action!</p> <h3 id="interacting-with-the-snap"><a href="#interacting-with-the-snap" class="header-anchor">#</a> Interacting with the snap</h3> <p>If you're serving the snap locally, open up a browser window, and navigate to <code>http://localhost:8080</code>.</p> <p>You should see a simple message, explaining the functionality of the snap, and two buttons. Start by clicking the <code>Connect</code> button; your Flask extension should pop up, and require you to click through two notifications.</p> <p>Once you've connected to Flask, smash that <code>Send Hello</code> button, and watch that Snap say hello!</p> <h2 id="where-to-go-from-here"><a href="#where-to-go-from-here" class="header-anchor">#</a> Where to go from here</h2> <p>Of course this is just the starting point, as all Hello World exercises are. There are other example snaps available in this repo, and chances are, by the time you're reading this, someone else has already begun developing something interesting that may give you further insight, as well.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/MetaMask/metamask-docs/edit/master/packages/docs/dist/guide/snaps-introduction.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">1/11/2022, 10:48:09 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/guide/mobile-best-practices.html" class="prev">
        Best Practices
      </a></span> <span class="next"><a href="/guide/snaps-rpc-api.html">
        Snaps JSON-RPC API
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.464eacd2.js" defer></script><script src="/assets/js/4.baa1ba71.js" defer></script><script src="/assets/js/35.eeafc70a.js" defer></script><script src="/assets/js/8.2bb62a19.js" defer></script>
  </body>
</html>
